import{j as e,B as r}from"./index-CLIkutcF.js";import{C as U,a as P,b as z,c as G,d as L,I as M}from"./Combination-VzPjPnOx.js";import{F as p,D as v,a as w,b as k,c as l}from"./AdminDashboard-D0Usvj4c.js";import{V as R,Q as C,T as H,k as I,l as y,n as c,o as O,p as i}from"./BatchUploadResults-DDs0gbJS.js";import{R as h,a as V}from"./tooltip-BzEeHMsZ.js";import{B as $}from"./badge-D3iIC29V.js";import{a as b}from"./separator-BLcX6XFs.js";import"./checkbox-B8vwzNvb.js";import"./EnhancedRegister-CfCga3ys.js";import"./shield-klLB-pUT.js";import"./api-dGCjnlFh.js";import"./textarea-BeCFIVKL.js";import"./lock-BKxMHSyS.js";const re=({loading:d,error:g,scoreFilter:a,setScoreFilter:A,searchQuery:n,setSearchQuery:S,searchTimeout:E,setSearchTimeout:T,fetchCreditReports:o,applyFilter:t,creditReports:j,toast:x,api:u,onRefresh:B,setActiveTab:D})=>e.jsxs(U,{className:"border border-[#1a4a38]",children:[e.jsx(P,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(z,{className:"text-gray-900 dark:text-white",children:"Credit Score Oversight"}),e.jsx(G,{className:"text-gray-600 dark:text-[#a8d5ba]",children:"View and manage credit reports with full breakdowns"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(r,{className:"bg-[#2196f3] hover:bg-[#0b7dda] text-white",onClick:async()=>{try{const s=await u.post("/admin/credit-reports/recalculate-all");x({title:"Success",description:"Credit scores are being recalculated",variant:"default"}),o(1,n)}catch(s){console.error("Error recalculating scores:",s),x({title:"Error",description:"Failed to recalculate scores",variant:"destructive"})}},disabled:d,children:[e.jsx(h,{className:`mr-2 h-4 w-4 ${d?"animate-spin":""}`}),"Recalculate Scores"]}),e.jsxs(r,{variant:"outline",onClick:()=>D("batch-uploads"),className:"border-[#ff9800] text-[#e68a00] hover:bg-[#fff3e0] dark:border-[#ffb74d] dark:text-[#ffcc02] dark:hover:bg-[#ff9800]/20",children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Batch Upload"]}),e.jsxs(r,{variant:"outline",className:"border-[#2196f3] text-[#2196f3] hover:bg-[#f0f7f4] dark:hover:bg-[#1a4a38]",onClick:async()=>{try{const s=await u.post("/admin/credit-reports/flag-suspicious");x({title:"Success",description:"Suspicious scores have been flagged",variant:"default"}),o(1,n)}catch(s){console.error("Error flagging suspicious scores:",s),x({title:"Error",description:"Failed to flag suspicious scores",variant:"destructive"})}},disabled:d,children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Flag Suspicious"]}),e.jsx(r,{variant:"outline",onClick:B,className:"border-[#2196f3] text-[#2196f3] hover:bg-[#f0f7f4] dark:hover:bg-[#1a4a38]",disabled:d,children:"Refresh"})]})]})}),e.jsx(L,{children:d?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[200px]",children:[e.jsx("div",{className:"animate-spin h-12 w-12 border-t-4 border-b-4 border-[#2196f3] rounded-full mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading credit reports..."})]}):g?e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-red-600 font-bold",children:"Error:"}),e.jsx("span",{className:"text-red-700 dark:text-red-300",children:g})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[a!=="all"&&e.jsx("div",{className:"mb-3",children:e.jsxs($,{className:"bg-[#2196f3] text-white",children:[e.jsx(p,{className:"h-3 w-3 mr-1"}),"Filtered: ",a==="excellent"?"Excellent (800+)":a==="good"?"Good (700-799)":a==="fair"?"Fair (600-699)":a==="poor"?"Poor (Below 600)":a==="flagged"?"Flagged Scores":a]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"relative w-full sm:max-w-md",children:[e.jsx(V,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(M,{type:"text",placeholder:"Search by name or email...",className:"pl-10 w-full",value:n,onChange:s=>{S(s.target.value),clearTimeout(E),T(setTimeout(()=>{o(1,s.target.value)},500))}})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>o(1,n),disabled:d,className:"border-[#2196f3] text-[#2196f3] hover:bg-[#f0f7f4] dark:hover:bg-[#1a4a38]",children:[e.jsx(h,{className:`h-4 w-4 mr-2 ${d?"animate-spin":""}`}),"Refresh"]}),e.jsxs(v,{children:[e.jsx(w,{asChild:!0,children:e.jsxs(r,{variant:"outline",className:"border-[#2196f3] text-[#2196f3]",children:[e.jsx(p,{className:"mr-2 h-4 w-4"}),a==="all"?"Filter":a==="excellent"?"Excellent (800+)":a==="good"?"Good (700-799)":a==="fair"?"Fair (600-699)":a==="poor"?"Poor (Below 600)":a==="flagged"?"Flagged Scores":"Filter"]})}),e.jsxs(k,{children:[e.jsx(l,{onClick:()=>t("all"),className:a==="all"?"bg-[#f0f7f4] dark:bg-[#1a4a38]":"",children:"All Scores"}),e.jsx(l,{onClick:()=>t("excellent"),className:a==="excellent"?"bg-[#f0f7f4] dark:bg-[#1a4a38]":"",children:"Excellent (800+)"}),e.jsx(l,{onClick:()=>t("good"),className:a==="good"?"bg-[#f0f7f4] dark:bg-[#1a4a38]":"",children:"Good (700-799)"}),e.jsx(l,{onClick:()=>t("fair"),className:a==="fair"?"bg-[#f0f7f4] dark:bg-[#1a4a38]":"",children:"Fair (600-699)"}),e.jsx(l,{onClick:()=>t("poor"),className:a==="poor"?"bg-[#f0f7f4] dark:bg-[#1a4a38]":"",children:"Poor (Below 600)"}),e.jsx(l,{onClick:()=>t("flagged"),className:a==="flagged"?"bg-[#f0f7f4] dark:bg-[#1a4a38]":"",children:"Flagged Scores"})]})]}),a!=="all"&&e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>t("all"),className:"text-xs text-gray-500 hover:text-gray-700",children:"Clear Filter"})]})]})]}),e.jsxs("div",{className:"rounded-md border border-[#1a4a38]",children:[e.jsx("div",{className:"block md:hidden space-y-3 w-full overflow-x-auto",children:j.map(s=>{var N;let m="Poor",f="bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";return s.score>=800?(m="Excellent",f="bg-[#4caf50]/20 text-green-800 dark:text-green-300"):s.score>=700?(m="Good",f="bg-[#8bc34a]/20 text-lime-800 dark:text-lime-300"):s.score>=600&&(m="Fair",f="bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300"),e.jsxs("div",{className:"bg-white dark:bg-[#0d261c] rounded-xl shadow border border-[#1a4a38] p-3 flex flex-col gap-2 w-full",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#8bc34a] to-[#2196f3] text-white h-8 w-8 rounded-full flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"font-bold text-lg",children:((N=s.userName)==null?void 0:N[0])||"?"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white text-sm",children:s.userName}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${f}`,children:m}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white text-xs",children:s.score})]})]})]}),e.jsxs(v,{children:[e.jsx(w,{asChild:!0,children:e.jsx(r,{variant:"ghost",size:"icon",className:"h-8 w-8 p-0 rounded-full hover:bg-gray-100 dark:hover:bg-[#1a4a38]","aria-label":"Open credit report actions menu",children:e.jsx(b,{className:"h-4 w-4 text-blue-500"})})}),e.jsxs(k,{className:"min-w-[140px] rounded-xl shadow-xl p-1 bg-white dark:bg-[#0d261c] border border-gray-200 dark:border-[#2e4d3d]",children:[e.jsxs(l,{className:"px-3 py-2 text-sm flex items-center gap-2 hover:bg-[#f0f7f4] dark:hover:bg-[#1a4a38]",children:[e.jsx(b,{className:"h-4 w-4 text-blue-500"})," View Details"]}),e.jsxs(l,{className:"px-3 py-2 text-sm flex items-center gap-2 hover:bg-[#f0f7f4] dark:hover:bg-[#1a4a38]",children:[e.jsx(C,{className:"h-4 w-4 text-yellow-600"})," Flag Suspicious"]}),e.jsxs(l,{className:"px-3 py-2 text-sm flex items-center gap-2 hover:bg-[#f0f7f4] dark:hover:bg-[#1a4a38]",children:[e.jsx(h,{className:"h-4 w-4 text-green-600"})," Recalculate"]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center text-xs mt-1",children:[e.jsx("span",{className:"bg-[#e3f2fd] text-[#1976d2] px-2 py-0.5 rounded-full",children:s.status}),s.factors&&e.jsx("span",{className:"bg-[#f0f7f4] text-gray-700 px-2 py-0.5 rounded-full",children:s.factors})]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-[#a8d5ba] mt-1",children:["Last updated: ",s.lastUpdated]})]},s.id)})}),e.jsx("div",{className:"hidden md:block w-full overflow-x-auto",children:e.jsx("div",{className:"min-w-[700px]",children:e.jsxs(H,{children:[e.jsx(I,{className:"bg-[#f0f7f4] dark:bg-[#1a4a38]",children:e.jsxs(y,{children:[e.jsx(c,{className:"font-semibold",children:"User"}),e.jsx(c,{className:"font-semibold",children:"Score"}),e.jsx(c,{className:"font-semibold",children:"Factors"}),e.jsx(c,{className:"font-semibold",children:"Status"}),e.jsx(c,{className:"font-semibold",children:"Last Updated"}),e.jsx(c,{className:"text-right font-semibold",children:"Actions"})]})}),e.jsx(O,{children:j.map(s=>e.jsxs(y,{className:"hover:bg-[#f0f7f4] dark:hover:bg-[#1a4a38]",children:[e.jsx(i,{className:"font-medium",children:s.userName}),e.jsx(i,{children:s.score}),e.jsx(i,{children:s.factors}),e.jsx(i,{children:s.status}),e.jsx(i,{children:s.lastUpdated}),e.jsx(i,{className:"text-right",children:e.jsx(r,{variant:"ghost",size:"sm",children:e.jsx(b,{className:"h-4 w-4"})})})]},s.id))})]})})})]})]})})]});export{re as default};
//# sourceMappingURL=CreditOversightPanel-CO9-Hju5.js.map
