import{b as a,bV as n,bU as i,cH as c}from"./index-CLIkutcF.js";const r=a.create({baseURL:"/api/v1",headers:{"Content-Type":"application/json"},withCredentials:!0,timeout:1e4});r.interceptors.request.use(async e=>{const t=e.method&&e.method.toLowerCase();if(["post","put","patch","delete"].includes(t)){let s=i();s||(s=await n()),s&&(e.headers["x-csrf-token"]=s)}return e},e=>Promise.reject(e));r.interceptors.response.use(e=>e,async e=>{e.config;const{response:t}=e;return!t||t.status!==401?(u(e),Promise.reject(e)):(d(),Promise.reject(e))});const d=()=>{window.location.pathname!=="/login"&&(window.location.href="/login")},u=e=>{const{response:t}=e;if(t&&t.status===401)return;let s="Error",o="An unexpected error occurred. Please try again.";t?t.data&&t.data.message?o=t.data.message:t.status===403?(s="Access Denied",o="You do not have permission to perform this action."):t.status===404?(s="Not Found",o="The requested resource was not found."):t.status>=500&&(s="Server Error",o="A server error occurred. Please try again later."):e.message==="Network Error"&&(s="Network Error",o="Unable to connect to the server. Please check your internet connection."),c({title:s,description:o,variant:"destructive"})};async function f(){const e=await fetch("/api/v1/admin/stats",{method:"GET",headers:{accept:"application/json"},credentials:"include"});if(!e.ok)throw new Error(`Failed to fetch admin stats: ${e.status}`);return await e.json()}export{r as a,f};
//# sourceMappingURL=api-dGCjnlFh.js.map
